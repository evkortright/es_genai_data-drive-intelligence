[.text-4xl]
[.text-white]
== 0 - The Case for Painless
image::blue-background.png[background, size=cover]

[.text-3xl]
== The Need for Scripting in Painless
image::white-background.png[background, size=cover]

* Elasticsearch can help you solve many problems right out of the box

* There will be times, however, when you will need to write a script as part of the solution

** For example, you may want to modify the way in which documents are scored in a full-text search

** Or you may want to calculate the duration of a trip and store it in a new field

** Or you may want to use an advanced optimization algorithm to find the best route for a package delivery driver

* In such cases, you will need to use Elasticsearch’s Painless scripting language

[.text-3xl]
== Example: Generate a Loan Quote
image::white-background.png[background, size=cover]

* Say you have an index that keeps track of loan applicants and their credit ratings

```
include::../code/add_two_borrowers.painless[]
```

* A bank wants to use this data to determine an interest rate based on their credit rating and also classify them according to risk level

[.text-3xl]
== Loan Quote (continued)
image::white-background.png[background, size=cover]

* Specifically, the bank wants a query that will return a loan quote as follows:

** The quote should include a risk rating with a value of `Good` or `Poor` which will be based on the borrower’s credit rating and a risk threshold should appear in the results of the query

** An interest rate offer with a value based on the risk rating should also be included

** The risk threshold, together with the good and poor interest rates will be provided as an input to the query

** For example, the bank may want to generate quotes with a good interest rate of 10% to borrowers with a credit rating higher than 500 and 15% otherwise

[.text-3xl]
== Painless to the Rescue!
image::white-background.png[background, size=cover]

[.text-left]
* Using Painless, we can write the following DSL query:

```
include::../code/010_loan_quote_intro_example.painless[]
```

[.text-2xl]
* Don’t worry about the details for now — just copy-paste and run the query in your Kibana console!

[.text-3xl]
[.columns]
== Query and Script Results
image::white-background.png[background, size=cover]

[.column]
[source,json]
----
include::../code/020-borrower-mary-quote.painless[]
----

[.column]
[source,json]
----
include::../code/030-borrower-joe-quote.painless[]
----

[.text-3xl]
== Course Outline
image::white-background.png[background, size=cover]

* In this course, you will learn to write scripts that will help you solve a wide variety of simple to complex data processing problems

* We will first explore the syntax and basics of Painless scripting

* Then we will develop simple scripts that process index data during Elasticsearch operations, such as search and update

* Next we will look more closely at working with numbers, strings and dates — types commonly used in Elasticsearch indices
Finally, we will solve a complete problem using the skills you have learned

[.text-4xl]
[.text-white]
== Lab 0: Code from Slides
image::green-background.png[background, size=cover]

[.text-white]
* For your convenience, you will find all the code from the course slides in Lab 0